import{j as x,f as u,l as E,c as o,a as e,t,h as n,g as _,F as y,r as f,m as S,v as j,o as r}from"./CoqnhHP_.js";import{_ as I}from"./DlAUqK2U.js";const N={class:"debug-page"},z={key:0},C={class:"image-test-container"},D={class:"image-box"},U=["src","alt"],B=["placeholder"],J={key:0,class:"loading"},O={key:1,class:"error"},R={key:2},T={class:"results-grid"},V={key:0},$=["src"],F={key:1,class:"no-image"},L={__name:"debug",setup(M){const{t:s}=x(),d=u(null),k=u(["https://plaumondpicture.s3.eu-west-3.amazonaws.com/Transcriptions/01/01.jpg","https://plaumondpicture.s3.eu-west-3.amazonaws.com/Deployments/00/01.jpg","https://plaumondpicture.s3.eu-west-3.amazonaws.com/Archetypes/03/01.jpg","https://plaumondpicture.s3.eu-west-3.amazonaws.com/Drawings+/01/01.jpg"]),g=u("etude"),c=u([]),h=u(null),m=u(!1);async function v(){try{d.value=await $fetch("/api/test-connection")}catch(a){d.value={error:a.message,details:a.data||s("debug.no_details")}}}async function w(){if(g.value.trim()){c.value=[],h.value=null,m.value=!0;try{const a=await $fetch("/api/search",{params:{q:g.value}});c.value=a.artworks,console.log("RÃ©sultats de recherche:",a)}catch(a){console.error("Erreur de recherche:",a),h.value={message:a.message,data:a.data||s("debug.no_details")}}finally{m.value=!1}}}function b(a){const i=a.target;i.src="https://via.placeholder.com/300x200?text=Image+non+disponible",i.classList.add("error")}return E(()=>{v()}),(a,i)=>(r(),o("div",N,[e("h1",null,t(n(s)("debug.title")),1),e("div",null,[e("h2",null,t(n(s)("debug.section_connection")),1),e("button",{class:"test-button",onClick:v},t(n(s)("debug.action_test_connection")),1),d.value?(r(),o("pre",z,t(JSON.stringify(d.value,null,2)),1)):_("",!0)]),e("div",null,[e("h2",null,t(n(s)("debug.section_images")),1),e("div",C,[(r(!0),o(y,null,f(k.value,(l,p)=>(r(),o("div",{key:p,class:"image-test"},[e("h3",null,t(n(s)("gallery.image_alt",{index:p+1})),1),e("div",D,[e("img",{src:l,alt:`Test ${p+1}`,onError:b},null,40,U)]),e("code",null,t(l),1)]))),128))])]),e("div",null,[e("h2",null,t(n(s)("debug.section_search")),1),S(e("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>g.value=l),type:"text",placeholder:n(s)("debug.search_placeholder"),class:"search-input"},null,8,B),[[j,g.value]]),e("button",{class:"test-button",onClick:w},t(n(s)("debug.action_search")),1),m.value?(r(),o("div",J,t(n(s)("debug.loading")),1)):_("",!0),h.value?(r(),o("div",O,[e("h3",null,t(n(s)("debug.error")),1),e("pre",null,t(JSON.stringify(h.value,null,2)),1)])):_("",!0),c.value&&c.value.length?(r(),o("div",R,[e("h3",null,t(n(s)("debug.results",{count:c.value.length})),1),e("div",T,[(r(!0),o(y,null,f(c.value,l=>(r(),o("div",{key:l.id,class:"result-card"},[e("h4",null,t(l.title),1),l.imageUrls&&l.imageUrls.length?(r(),o("div",V,[e("img",{src:l.imageUrls[0],alt:"",onError:b},null,40,$)])):(r(),o("div",F,t(n(s)("debug.no_image")),1)),e("pre",null,t(JSON.stringify(l,null,2)),1)]))),128))])])):_("",!0)])]))}},Q=I(L,[["__scopeId","data-v-8b4651f7"]]);export{Q as default};
